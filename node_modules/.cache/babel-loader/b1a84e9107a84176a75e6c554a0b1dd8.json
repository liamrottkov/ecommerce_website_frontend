{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\liamr\\\\Desktop\\\\coding_temple\\\\week_7\\\\ecommerce_website\\\\frontend\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Switch, Route } from 'react-router-dom';\nimport Header from './components/header';\nimport Footer from './components/footer';\nimport Admin from './views/admin';\nimport Contact from './views/contact';\nimport Commerce from './views/commerce'; // import Data from './views/data';\n\nimport Login from './views/login';\nimport Register from './views/register';\nimport Checkout from './views/checkout';\nimport SECRET_KEY from './config.js';\nimport { StripeProvider } from 'react-stripe-elements';\n\nlet jwt = require('jsonwebtoken');\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.handleLogout = async e => {\n      e.preventDefault();\n      this.setState({\n        'logged_in': false\n      }); // setup a message saying registered or error\n\n      if (data.message === 'success') {\n        alert('You are now Logged out!');\n      } else {\n        alert(data.message);\n      }\n    };\n\n    this.handleLogin = async e => {\n      e.preventDefault();\n      let email = e.target.elements.email.value;\n      let password = e.target.elements.pass.value;\n      const URL = 'http://localhost:5000/authentication/login';\n      let token = jwt.sign({\n        'email': email,\n        'password': password\n      }, SECRET_KEY, {\n        expiresIn: '10h' // expires in 1 hour\n\n      });\n      let response = await fetch(URL, {\n        'headers': {\n          'Content-Type': 'application/json',\n          'token': token\n        }\n      });\n      let data = await response.json();\n\n      if (data.message === 'success') {\n        this.setState({\n          'logged_in': true,\n          'token': data.token\n        });\n\n        if (data.admin == 1) {\n          this.setState({\n            'admin': true\n          });\n        }\n\n        localStorage.setItem('token', data.token);\n        alert('You are now logged in!');\n      } else {\n        alert(data.message);\n      }\n    };\n\n    this.handleRegister = async e => {\n      e.preventDefault();\n      let email = e.target.elements.email.value;\n      let password = e.target.elements.pass.value;\n      const URL = 'http://localhost:5000/authentication/register'; // encrypt a token with the proper payload info to send to our api\n\n      let token = jwt.sign({\n        'email': email,\n        'password': password\n      }, SECRET_KEY, {\n        expiresIn: '10h' // expires in 1 hour\n\n      }); // send the token to register the user\n\n      let response = await fetch(URL, {\n        'method': 'POST',\n        'headers': {\n          'Content-Type': 'application/json',\n          'token': token\n        }\n      });\n      let data = await response.json(); // setup a message saying registered or error\n\n      if (data.message === 'success') {\n        alert('You are now registered!');\n      } else {\n        alert(data.message);\n      }\n    };\n\n    this.getProduct = async e => {\n      let URL = 'http://localhost:5000/api/retrieve/products';\n      let response = await fetch(URL);\n      let data = await response.json();\n      console.log(data);\n      this.setState({\n        products: data.products\n      });\n    };\n\n    this.addItem = product_id => {\n      // set state variables into local, as not to alter state directly\n      let products = this.state.products;\n      let cart = this.state.cart; // add item with correct id to local cart variable\n\n      for (let i in products) {\n        if (products[i].product_id === product_id) {\n          cart.push(products[i]);\n          break;\n        }\n      } // set the cart with updated values\n\n\n      this.setState({\n        cart\n      });\n      this.getTotal();\n    };\n\n    this.removeItem = product_id => {\n      let cart = this.state.cart;\n\n      for (let i in cart) {\n        if (cart[i].product_id === product_id) {\n          cart.splice(i, 1);\n          break;\n        }\n      } // reset the state\n\n\n      this.setState({\n        cart\n      });\n      this.getTotal();\n    };\n\n    this.getTotal = () => {\n      let cart = this.state.cart;\n      let total = 0;\n\n      for (let i in cart) {\n        total += cart[i].price;\n      }\n\n      this.setState({\n        total\n      });\n    };\n\n    this.state = {\n      logged_in: false,\n      admin: false,\n      token: '',\n      cart: [],\n      products: [],\n      total: 0\n    };\n  }\n\n  render() {\n    return React.createElement(StripeProvider, {\n      apiKey: \"pk_test_sTltal2Cd2L8A28D2htWtv5w00uLqPReZ0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(Header, {\n      logged_in: this.state.logged_in,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => React.createElement(Commerce, {\n        products: this.state.products,\n        cart: this.state.cart,\n        addItem: this.addItem,\n        removeItem: this.removeItem,\n        total: this.state.total,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/checkout\",\n      render: () => React.createElement(Checkout, {\n        cart: this.state.cart,\n        removeItem: this.removeItem,\n        total: this.state.total,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }), this.state.admin === true ? React.createElement(Route, {\n      exact: true,\n      path: \"/admin\",\n      render: () => React.createElement(Admin, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }) : React.createElement(Route, {\n      exact: true,\n      path: \"/admin\",\n      render: () => React.createElement(\"h2\", {\n        className: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Sorry, you do not have the priviledges to access this page.\")),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/contact\",\n      render: () => React.createElement(Contact, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      render: () => React.createElement(Login, {\n        handleLogin: this.handleLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/register\",\n      render: () => React.createElement(Register, {\n        handleRegister: this.handleRegister,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }))), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\liamr\\Desktop\\coding_temple\\week_7\\ecommerce_website\\frontend\\src\\App.js"],"names":["React","Component","Switch","Route","Header","Footer","Admin","Contact","Commerce","Login","Register","Checkout","SECRET_KEY","StripeProvider","jwt","require","App","constructor","handleLogout","e","preventDefault","setState","data","message","alert","handleLogin","email","target","elements","value","password","pass","URL","token","sign","expiresIn","response","fetch","json","admin","localStorage","setItem","handleRegister","getProduct","console","log","products","addItem","product_id","state","cart","i","push","getTotal","removeItem","splice","total","price","logged_in","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport { Switch, Route } from 'react-router-dom';\nimport Header from './components/header';\nimport Footer from './components/footer';\nimport Admin from './views/admin';\nimport Contact from './views/contact';\nimport Commerce from './views/commerce';\n// import Data from './views/data';\nimport Login from './views/login';\nimport Register from './views/register';\nimport Checkout from './views/checkout';\nimport SECRET_KEY from './config.js';\nimport { StripeProvider } from 'react-stripe-elements';\n\n\nlet jwt = require('jsonwebtoken')\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      logged_in: false,\n      admin: false,\n      token: '',\n      cart: [],\n      products: [],\n      total: 0,\n    }\n  }\n\n  handleLogout = async(e) => {\n    e.preventDefault();\n\n    this.setState({\n      'logged_in' : false,\n    });\n\n    // setup a message saying registered or error\n    if (data.message === 'success') {\n      alert('You are now Logged out!')\n    } else {\n      alert(data.message)\n    }\n  }\n\n  handleLogin = async(e) => {\n    e.preventDefault();\n\n    let email = e.target.elements.email.value;\n    let password = e.target.elements.pass.value;\n\n    const URL = 'http://localhost:5000/authentication/login'\n\n    let token = jwt.sign(\n      { 'email':email, 'password':password },\n      SECRET_KEY,\n      { expiresIn: '10h' } // expires in 1 hour\n    );\n\n    let response = await fetch(URL, {\n      'headers': {\n        'Content-Type': 'application/json',\n        'token': token\n      }\n    });\n\n    let data = await response.json();\n\n    if (data.message === 'success') {\n      this.setState({\n        'logged_in' : true,\n        'token': data.token\n    });\n\n      if (data.admin == 1) {\n        this.setState({ 'admin' : true });\n      }\n      localStorage.setItem('token', data.token);\n\n      alert('You are now logged in!')\n    } else {\n      alert(data.message)\n    }\n  }\n\n\n  handleRegister = async(e) => {\n    e.preventDefault();\n\n    let email = e.target.elements.email.value;\n    let password = e.target.elements.pass.value;\n\n    const URL = 'http://localhost:5000/authentication/register'\n\n    // encrypt a token with the proper payload info to send to our api\n    let token = jwt.sign(\n      { 'email':email, 'password':password },\n      SECRET_KEY,\n      { expiresIn: '10h' } // expires in 1 hour\n    );\n\n    // send the token to register the user\n    let response = await fetch(URL, {\n      'method': 'POST',\n      'headers': {\n        'Content-Type': 'application/json',\n        'token': token\n      }\n    });\n\n    let data = await response.json();\n\n    // setup a message saying registered or error\n    if (data.message === 'success') {\n      alert('You are now registered!')\n    } else {\n      alert(data.message)\n    }\n  }\n\n  getProduct = async(e) => {\n\n    let URL = 'http://localhost:5000/api/retrieve/products';\n\n    let response = await fetch(URL);\n\n    let data = await response.json();\n\n    console.log(data)\n\n    this.setState({ products: data.products })\n  }\n\n   // componentDidMount() {\n   //   this.getProduct();\n   // }\n\n  addItem = product_id => {\n    // set state variables into local, as not to alter state directly\n    let products = this.state.products;\n    let cart = this.state.cart;\n\n    // add item with correct id to local cart variable\n    for (let i in products) {\n      if (products[i].product_id === product_id) {\n        cart.push(products[i]);\n        break;\n      }\n    }\n    // set the cart with updated values\n    this.setState({ cart })\n    this.getTotal();\n  }\n\n  removeItem = product_id => {\n\n    let cart = this.state.cart;\n\n    for (let i in cart) {\n      if (cart[i].product_id === product_id) {\n        cart.splice(i, 1);\n        break;\n      }\n    }\n\n    // reset the state\n    this.setState({ cart });\n    this.getTotal();\n  }\n\n  getTotal = () => {\n\n    let cart = this.state.cart;\n\n    let total = 0;\n\n    for (let i in cart) {\n      total += cart[i].price;\n    }\n    this.setState({ total });\n  }\n\n  render() {\n    return (\n      <StripeProvider apiKey=\"pk_test_sTltal2Cd2L8A28D2htWtv5w00uLqPReZ0\">\n        <div className=\"App\">\n          <Header\n          logged_in={this.state.logged_in}\n          />\n          <div className=\"container\">\n            <Switch>\n              <Route exact path='/' render={() => <Commerce products={this.state.products}\n              cart={this.state.cart}\n              addItem={this.addItem}\n              removeItem={this.removeItem}\n              total={this.state.total}\n              />} />\n\n              <Route exact path='/checkout' render={() => <Checkout  cart={this.state.cart}\n              removeItem={this.removeItem}\n              total={this.state.total}\n              />} />\n\n              { (this.state.admin === true) ?\n                <Route exact path='/admin' render={() => <Admin />} />\n                :\n                <Route exact path='/admin' render={() => <h2 className=\"center\"><b>Sorry, you do not have the priviledges to access this page.</b></h2>} />\n              }\n\n              <Route exact path='/contact' render={() => <Contact />} />\n\n              <Route exact path='/login' render={() => <Login handleLogin={this.handleLogin} />} />\n\n              <Route exact path='/register' render={() => <Register handleRegister={this.handleRegister} />} />\n\n            </Switch>\n          </div>\n          <Footer />\n        </div>\n      </StripeProvider>\n    );\n  }\n}\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}