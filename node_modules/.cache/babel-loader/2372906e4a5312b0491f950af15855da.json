{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\liamr\\\\Desktop\\\\coding_temple\\\\week_7\\\\ecommerce_website\\\\frontend\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Switch, Route } from 'react-router-dom';\nimport Header from './components/header';\nimport Footer from './components/footer';\nimport Admin from './views/admin';\nimport Contact from './views/contact';\nimport Commerce from './views/commerce';\nimport Data from './views/data';\nimport Login from './views/login';\nimport Register from './views/register';\nimport Checkout from './views/checkout';\nimport SECRET_KEY from './config.js'; // import { Elements, StripeProvider } from 'react-stripe-elements';\n// import CheckoutForm from './components/checkoutForm';\n\nlet jwt = require('jsonwebtoken');\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.handleLogin = async e => {\n      e.preventDefault();\n      let email = e.target.elements.email.value;\n      let password = e.target.elements.pass.value;\n      const URL = 'http://localhost:5000/authentication/login';\n      let token = jwt.sign({\n        'email': email,\n        'password': password\n      }, SECRET_KEY, {\n        expiresIn: '10h' // expires in 1 hour\n\n      });\n      let response = await fetch(URL, {\n        'headers': {\n          'Content-Type': 'application/json',\n          'token': token\n        }\n      });\n      let data = await response.json();\n\n      if (data.message === 'success') {\n        this.setState({\n          'logged_in': true,\n          'admin': true,\n          'token': data.token\n        });\n        localStorage.setItem('token', data.token);\n        alert('You are now logged in!');\n      } else {\n        alert(data.message);\n      }\n    };\n\n    this.handleRegister = async e => {\n      e.preventDefault();\n      let email = e.target.elements.email.value;\n      let password = e.target.elements.pass.value;\n      const URL = 'http://localhost:5000/authentication/register'; // encrypt a token with the proper payload info to send to our api\n\n      let token = jwt.sign({\n        'email': email,\n        'password': password\n      }, SECRET_KEY, {\n        expiresIn: '10h' // expires in 1 hour\n\n      }); // send the token to register the user\n\n      let response = await fetch(URL, {\n        'method': 'POST',\n        'headers': {\n          'Content-Type': 'application/json',\n          'token': token\n        }\n      });\n      let data = await response.json(); // setup a message saying registered or error\n\n      if (data.message === 'success') {\n        alert('You are now registered!');\n      } else {\n        alert(data.message);\n      }\n    };\n\n    this.getProduct = async e => {\n      let URL = 'http://localhost:5000/api/retrieve/products';\n      let response = await fetch(URL);\n      let data = await response.json();\n      console.log(data);\n      this.setState({\n        products: data.products\n      });\n    };\n\n    this.addItem = product_id => {\n      // set state variables into local, as not to alter state directly\n      let products = this.state.products;\n      let cart = this.state.cart; // add item with correct id to local cart variable\n\n      for (let i in products) {\n        if (products[i].product_id === product_id) {\n          cart.push(products[i]);\n          break;\n        }\n      } // set the cart with updated values\n\n\n      this.setState({\n        cart\n      });\n      this.getTotal();\n    };\n\n    this.removeItem = product_id => {\n      let cart = this.state.cart;\n\n      for (let i in cart) {\n        if (cart[i].product_id === product_id) {\n          cart.splice(i, 1);\n          break;\n        }\n      } // reset the state\n\n\n      this.setState({\n        cart\n      });\n      this.getTotal();\n    };\n\n    this.getTotal = () => {\n      let cart = this.state.cart;\n      let total = 0;\n\n      for (let i in cart) {\n        total += cart[i].price;\n      }\n\n      this.setState({\n        total\n      });\n    };\n\n    this.state = {\n      logged_in: false,\n      admin: false,\n      token: '',\n      cart: [],\n      products: [],\n      total: 0\n    };\n  }\n\n  componentDidMount() {\n    this.getProduct();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(Header, {\n      logged_in: this.state.logged_in,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => React.createElement(Commerce, {\n        products: this.state.products,\n        cart: this.state.cart,\n        addItem: this.addItem,\n        removeItem: this.removeItem,\n        total: this.state.total,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/checkout\",\n      render: () => React.createElement(Checkout, {\n        cart: this.state.cart,\n        removeItem: this.removeItem,\n        total: this.state.total,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/admin\",\n      render: () => React.createElement(Admin, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/contact\",\n      render: () => React.createElement(Contact, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      render: () => React.createElement(Login, {\n        handleLogin: this.handleLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/register\",\n      render: () => React.createElement(Register, {\n        handleRegister: this.handleRegister,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }), this.state.logged_in ? React.createElement(Route, {\n      exact: true,\n      path: \"/data\",\n      render: () => React.createElement(Data, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }) : React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"You're not allowed to access this page, please log in.\"))), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\liamr\\Desktop\\coding_temple\\week_7\\ecommerce_website\\frontend\\src\\App.js"],"names":["React","Component","Switch","Route","Header","Footer","Admin","Contact","Commerce","Data","Login","Register","Checkout","SECRET_KEY","jwt","require","App","constructor","handleLogin","e","preventDefault","email","target","elements","value","password","pass","URL","token","sign","expiresIn","response","fetch","data","json","message","setState","localStorage","setItem","alert","handleRegister","getProduct","console","log","products","addItem","product_id","state","cart","i","push","getTotal","removeItem","splice","total","price","logged_in","admin","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport { Switch, Route } from 'react-router-dom';\nimport Header from './components/header';\nimport Footer from './components/footer';\nimport Admin from './views/admin';\nimport Contact from './views/contact';\nimport Commerce from './views/commerce';\nimport Data from './views/data';\nimport Login from './views/login';\nimport Register from './views/register';\nimport Checkout from './views/checkout';\nimport SECRET_KEY from './config.js';\n// import { Elements, StripeProvider } from 'react-stripe-elements';\n// import CheckoutForm from './components/checkoutForm';\n\n\nlet jwt = require('jsonwebtoken')\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      logged_in: false,\n      admin: false,\n      token: '',\n      cart: [],\n      products: [],\n      total: 0,\n    }\n  }\n\n  handleLogin = async(e) => {\n    e.preventDefault();\n\n    let email = e.target.elements.email.value;\n    let password = e.target.elements.pass.value;\n\n    const URL = 'http://localhost:5000/authentication/login'\n\n    let token = jwt.sign(\n      { 'email':email, 'password':password },\n      SECRET_KEY,\n      { expiresIn: '10h' } // expires in 1 hour\n    );\n\n    let response = await fetch(URL, {\n      'headers': {\n        'Content-Type': 'application/json',\n        'token': token\n      }\n    });\n\n    let data = await response.json();\n\n    if (data.message === 'success') {\n      this.setState({\n        'logged_in' : true,\n        'admin': true,\n        'token': data.token\n    });\n\n      localStorage.setItem('token', data.token);\n\n      alert('You are now logged in!')\n    } else {\n      alert(data.message)\n    }\n  }\n\n\n  handleRegister = async(e) => {\n    e.preventDefault();\n\n    let email = e.target.elements.email.value;\n    let password = e.target.elements.pass.value;\n\n    const URL = 'http://localhost:5000/authentication/register'\n\n    // encrypt a token with the proper payload info to send to our api\n    let token = jwt.sign(\n      { 'email':email, 'password':password },\n      SECRET_KEY,\n      { expiresIn: '10h' } // expires in 1 hour\n    );\n\n    // send the token to register the user\n    let response = await fetch(URL, {\n      'method': 'POST',\n      'headers': {\n        'Content-Type': 'application/json',\n        'token': token\n      }\n    });\n\n    let data = await response.json();\n\n    // setup a message saying registered or error\n    if (data.message === 'success') {\n      alert('You are now registered!')\n    } else {\n      alert(data.message)\n    }\n  }\n\n  getProduct = async(e) => {\n\n    let URL = 'http://localhost:5000/api/retrieve/products';\n\n    let response = await fetch(URL);\n\n    let data = await response.json();\n\n    console.log(data)\n\n    this.setState({ products:data.products })\n  }\n\n   componentDidMount() {\n     this.getProduct();\n   }\n\n  addItem = product_id => {\n    // set state variables into local, as not to alter state directly\n    let products = this.state.products;\n    let cart = this.state.cart;\n\n    // add item with correct id to local cart variable\n    for (let i in products) {\n      if (products[i].product_id === product_id) {\n        cart.push(products[i]);\n        break;\n      }\n    }\n    // set the cart with updated values\n    this.setState({ cart })\n    this.getTotal();\n  }\n\n  removeItem = product_id => {\n\n    let cart = this.state.cart;\n\n    for (let i in cart) {\n      if (cart[i].product_id === product_id) {\n        cart.splice(i, 1);\n        break;\n      }\n    }\n\n    // reset the state\n    this.setState({ cart });\n    this.getTotal();\n  }\n\n  getTotal = () => {\n\n    let cart = this.state.cart;\n\n    let total = 0;\n\n    for (let i in cart) {\n      total += cart[i].price;\n    }\n    this.setState({ total });\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Header\n        logged_in={this.state.logged_in}\n        />\n        <div className=\"container\">\n          <Switch>\n            <Route exact path='/' render={() => <Commerce products={this.state.products}\n            cart={this.state.cart}\n            addItem={this.addItem}\n            removeItem={this.removeItem}\n            total={this.state.total}/>} />\n\n            <Route exact path='/checkout' render={() => <Checkout  cart={this.state.cart}\n            removeItem={this.removeItem}\n            total={this.state.total}\n            />} />\n\n            <Route exact path='/admin' render={() => <Admin />} />\n\n            <Route exact path='/contact' render={() => <Contact />} />\n\n            <Route exact path='/login' render={() => <Login handleLogin={this.handleLogin} />} />\n\n            <Route exact path='/register' render={() => <Register handleRegister={this.handleRegister} />} />\n            {\n            this.state.logged_in ?\n            <Route exact path='/data' render={() => <Data />} /> :\n            <p>You're not allowed to access this page, please log in.</p>\n            }\n          </Switch>\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n}\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}